<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kepler Map Demo: 6 GeoJSON Layers</title>
    <script src="https://unpkg.com/mapbox-gl@latest/dist/mapbox-gl.js"></script>
    <link href="https://unpkg.com/mapbox-gl@latest/dist/mapbox-gl.css" rel="stylesheet" />
    <style>
        body { margin: 0; display: flex; flex-direction: column; }
        .map-title { font-weight: bold; font-size: 16px; margin: 10px 0 5px 10px; }
        .map-container { width: 100%; height: 400px; margin-bottom: 20px; }
    </style>
</head>
<body>

<!-- タイトルと地図 -->
<div>
    <div class="map-title">WD1: Weekday-Morning, Scenario 1 (Ped Deck+Extension Bridge)</div>
    <div id="map1" class="map-container"></div>
</div>
<div>
    <div class="map-title">WD2: Weekday-Morning, Scenario 2 (Ped Deck)</div>
    <div id="map2" class="map-container"></div>
</div>
<div>
    <div class="map-title">WD3: Weekday-Morning, Scenario 3 (Current)</div>
    <div id="map3" class="map-container"></div>
</div>
<div>
    <div class="map-title">WE1: Weekend-Afternoon, Scenario 5 (Ped Deck+Extension Bridge)</div>
    <div id="map4" class="map-container"></div>
</div>
<div>
    <div class="map-title">WE2: Weekend-Afternoon, Scenario 6 (Ped Deck)</div>
    <div id="map5" class="map-container"></div>
</div>
<div>
    <div class="map-title">WE3: Weekend-Afternoon, Scenario 3 (Current)</div>
    <div id="map6" class="map-container"></div>
</div>

<script>
    mapboxgl.accessToken = 'pk.eyJ1IjoianV0cGkzanV0cGkzIiwiYSI6ImNtYjYzenJrdjFqZjQyanBwdDB4cG5idDgifQ.RDJAKIKJ5WQD0evWX_TDyA';  // JUTPI3 Mapbox Token
    const geojsonFiles = [
        'WD1.json',
        'WD2.json',
        'WD3.json',
        'WE1.json',
        'WE2.json',
        'WE3.json'
    ];

    geojsonFiles.forEach((file, index) => {
        const map = new mapboxgl.Map({
            container: `map${index + 1}`,
            style: 'mapbox://styles/mapbox/light-v9',
            center: [106.8226, -6.2021],
            zoom: 16,
            pitch: 60,
            bearing: -17.6
        });

        map.on('load', () => {
            map.addSource(`geojson-${index}`, {
                type: 'geojson',
                data: file
            });
            map.addLayer({
                id: `geojson-layer-${index}`,
                type: 'line',
                source: `geojson-${index}`,
                paint: {
                    'line-color': '#FF5722',
                    'line-width': 3
                }
            });

            // 3D Buildings Layer
            map.addLayer({
                id: `3d-buildings-${index}`,
                source: 'composite',
                'source-layer': 'building',
                filter: ['==', 'extrude', 'true'],
                type: 'fill-extrusion',
                minzoom: 15,
                paint: {
                    'fill-extrusion-color': '#aaa',
                    'fill-extrusion-height': ['get', 'height'],
                    'fill-extrusion-base': ['get', 'min_height'],
                    'fill-extrusion-opacity': 0.6
                }
            });
        });
    });
</script>

</body>
</html>
